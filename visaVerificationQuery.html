<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Imigration</title>
      <link rel="stylesheet" href="./assets/css/bootstrap.min.css" />
      <link rel="stylesheet" href="./assets/css/style.css" />
      <link rel="stylesheet" href="./assets/css/responsive.css" />
   </head>
   <body>
      <main class="main">
         <nav class="navbar navbar-expand-sm navbar-light bg-light">
            <div class="container d-flex justify-content-between">
               <a class="navbar-brand" href="#">immnz</a>
               <button
                  class="navbar-toggler d-lg-none"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#collapsibleNavId"
                  aria-controls="collapsibleNavId"
                  aria-expanded="false"
                  aria-label="Toggle navigation"
               >
                  <span class="navbar-toggler-icon"></span>
               </button>

               <div class="collapse navbar-collapse flex-grow-0" id="navbarNavAltMarkup">
                  <div class="navbar-nav gap-4">
                     <a class="nav-link active" aria-current="page" href="#">Home</a>
                     <a class="nav-link" href="#">Features</a>
                     <a class="nav-link" href="#">Pricing</a>
                     <a class="nav-link disabled">Disabled</a>
                  </div>
               </div>
            </div>
         </nav>
         <section class="visa-verification-secion">
            <div class="container">
               <div class="visa-verification-header">
                  <div class="acting-for">
                     <label for="#">Acting for:</label>
                     <h4>Visa Verification Service</h4>
                  </div>
                  <div class="as-login">
                     <label for="#">Logged in as a:</label>
                     <h4>Mark Johan</h4>
                  </div>
               </div>
               <div class="visa-verification-content">
                  <h2>visa verification Enquiry</h2>
                  <p>Enter the details of the visa to be verified.</p>
                  <p>Please enter the details exactly as they appear in the visa holder's current passport.</p>
                  <div class="visa-verification-form auth-login-form">
                     <div class="login-input">
                        <label for="Familyname">Family Name</label>
                        <input type="text" id="Familyname" name="name" placeholder="Family Name" />
                        <div class="error" id="familyname-error">Please enter the family name.</div>
                     </div>
                     <div class="login-input">
                        <label for="nationality">Passport Nationality</label>
                        <select id="nationality">
                           <option value="">Select Nationality</option>
                           <option value="Bangladesh">Bangladesh</option>
                           <option value="India">India</option>
                           <option value="Pakistan">Pakistan</option>
                        </select>
                        <div class="error" id="nationality-error">Please select a nationality.</div>
                     </div>
                     <div class="login-input">
                        <label for="passportNumber">Passport Number</label>
                        <input type="text" id="passportNumber" name="passportNumber" placeholder="Passport Number" />
                        <div class="error" id="passportnumber-error">Please enter the passport number.</div>
                     </div>
                     <div class="login-input">
                        <label for="dateOfBirth">Date of Birth</label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" placeholder="Date of Birth" />
                        <div class="error" id="dateofbirth-error">Please enter the date of birth.</div>
                     </div>
                     <div class="login-input">
                        <label for="gender">Gender</label>
                        <select id="gender">
                           <option value="">Select Gender</option>
                           <option value="Man">Man</option>
                           <option value="Women">Women</option>
                           <option value="Others">Others</option>
                        </select>
                        <div class="error" id="gender-error">Please select a gender.</div>
                     </div>
                     <div class="login-input">
                        <label for="visadate">Visa Start Date</label>
                        <input type="date" id="visadate" name="visadate" placeholder="Visa Start Date" />
                        <div class="error" id="visadate-error">Please enter the visa start date.</div>
                     </div>
                     <div class="my-4">
                        <div class="d-flex gap-3">
                           <input type="checkbox" name="checkbox" id="check" />
                           <label for="check">The visa holder has consented to this check</label>
                        </div>
                        <div class="error" id="checkbox-error">You must check this box to proceed.</div>
                     </div>
                     <div class="login-input d-flex align-items-center gap-3">
                        <button type="button" id="submit-btn" onclick="validateForm()">Check Visa</button>
                        <div class="success" id="success-message">Form submitted successfully!</div>
                     </div>
                  </div>
               </div>
            </div>
         </section>
      </main>
      <script src="./assets/js/jquery-3.6.0.min.js"></script>
      <script src="./assets/js/bootstrap.min.js"></script>
      <script>
         async function validateForm() {
            // Get form elements
            const familyname = document.getElementById("Familyname");
            const nationality = document.getElementById("nationality");
            const passportNumber = document.getElementById("passportNumber");
            const dateOfBirth = document.getElementById("dateOfBirth");
            const gender = document.getElementById("gender");
            const visadate = document.getElementById("visadate");
            const check = document.getElementById("check");
            const submitBtn = document.getElementById("submit-btn");

            // Get error elements
            const familynameError = document.getElementById("familyname-error");
            const nationalityError = document.getElementById("nationality-error");
            const passportnumberError = document.getElementById("passportnumber-error");
            const dateofbirthError = document.getElementById("dateofbirth-error");
            const genderError = document.getElementById("gender-error");
            const visadateError = document.getElementById("visadate-error");
            const checkboxError = document.getElementById("checkbox-error");
            const successMessage = document.getElementById("success-message");

            let isValid = true;

            // Family name validation
            if (familyname.value.trim() === "") {
               familynameError.style.display = "block";
               isValid = false;
            } else {
               familynameError.style.display = "none";
            }

            // Nationality validation
            if (nationality.value === "") {
               nationalityError.style.display = "block";
               isValid = false;
            } else {
               nationalityError.style.display = "none";
            }

            // Passport number validation
            if (passportNumber.value.trim() === "") {
               passportnumberError.style.display = "block";
               isValid = false;
            } else {
               passportnumberError.style.display = "none";
            }

            // Date of birth validation
            if (dateOfBirth.value === "") {
               dateofbirthError.style.display = "block";
               isValid = false;
            } else {
               dateofbirthError.style.display = "none";
            }

            // Gender validation
            if (gender.value === "") {
               genderError.style.display = "block";
               isValid = false;
            } else {
               genderError.style.display = "none";
            }

            // Visa start date validation
            if (visadate.value === "") {
               visadateError.style.display = "block";
               isValid = false;
            } else {
               visadateError.style.display = "none";
            }

            // Checkbox validation
            if (!check.checked) {
               checkboxError.style.display = "block";
               isValid = false;
            } else {
               checkboxError.style.display = "none";
            }

            // If all validations pass
            if (isValid) {
               // Show loading state
               submitBtn.classList.add("loading");
               submitBtn.disabled = true;

               const data = {
                  familyname: familyname.value,
                  nationality: nationality.value,
                  passportNumber: passportNumber.value,
                  dateOfBirth: dateOfBirth.value,
                  gender: gender.value,
                  visadate: visadate.value,
               };
               window.location.href = "visa-result.html";
               //    try {
               //       const response = await fetch("https://example.com/api/visa-check", {
               //          method: "POST",
               //          headers: {
               //             "Content-Type": "application/json",
               //          },
               //          body: JSON.stringify(data),
               //       });

               //       if (response.ok) {
               //          successMessage.style.display = "block";
               //          setTimeout(() => {
               //             successMessage.style.display = "none";
               //          }, 5000);
               //       } else {
               //          // Handle server errors
               //          const errorData = await response.json();
               //          console.log(errorData.message);
               //       }
               //    } catch (error) {
               //       console.log(error.message);
               //    } finally {
               //       // Remove loading state
               //       submitBtn.classList.remove("loading");
               //       submitBtn.disabled = false;
               //    }
            }
         }
      </script>
   </body>
</html>
